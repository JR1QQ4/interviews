# 软件测试

> 《软件测试》(美) Ron Patton 著 第二版

## 第一部分 软件测试综述

常用的术语: 缺点defect、偏差variance、故障fault、失败failure、问题problem、矛盾inconsistency、错误error、特殊feature、
事件incident、缺陷dbug、异常anomaly

软件缺陷(software bug)的5个规则:

1）软件未实现产品说明书（product specification）要求的功能
2）软件出现了产品说明书指明不应该出现的错误
3）软件实现了产品说明书未提到的功能
4）软件未实现产品说明书虽未明确提及但应该实现的目标
5）软件难以理解、不易使用、运行缓慢或者——从测试员的角度来看——最终用户会认为不好

软件测试员的目标:

- 是发现软件缺陷
- 是尽可能早地找出软件缺陷
- 是尽可能早地找出软件缺陷，并确保其得以修复；修复缺陷并非指一定要改正软件，可以是指在用户手册中增加一段注释或未用户提供特殊的培训

软件测试员应具备的素质:

- 他们是群探索者，是故障排除员，不放过任何蛛丝马迹，具有创造性
- 他们是群追求完美者，判断准确，注重策略和外交，善于说服

产品的组成部分: 产品说明书、进度表、测试计划、产品审查、设计文档、以前版本的反馈、竞争对手的信息、用户调查、软件体系结构、
易用性数据、软件代码、外观说明

软件产品的组成部分: 帮助文件、用户手册、样本和示例、标签和不干胶、产品支持信息、图标和标志、错误信息、广告和宣传材料、安装、说明文件

软件项目成员:

- 项目经理、程序经理或监制人员自始至终驱动整个项目，通常负责编写产品说明书、管理进度、进行重大决策
- 体系架构师或者系统工程师是产品小组中的技术专家，一般经验丰富，可以胜任设计整个系统的体系架构或软件
- 程序员、开发人员或者代码制作者设计、编写软件并修复软件中的缺陷
- 测试员或质量保证（Quality Assurance，QA）员负责找出并报告软件产品的问题
- 技术作者、用户协作专员、用户培训专员、手册编写员或者文案专员编制软件产品附带的文件和联机文档
- 配置管理员或构建员负责把程序员编写的代码及技术作者写的全部文档资料组合在一起，合成为一个软件包

软件开发生命周期模式（从最初构思到公开发行的过程）的 4 种最常用的模式:

- 大爆炸模式
- 编写边改模式
- 瀑布模式
- 螺旋模式: 确定目标、可选方案和限制条件->明确并化解风险->评估可选方案->当前阶段开发和测试->计划下一阶段->确定进入下一阶段的方法
    - 螺旋模式包含了一点瀑布模式(分析、设计、开发和测试的步骤)、一点边写边改模式和一点大爆炸模式(从外界观察)

敏捷软件开发(Agile Software Development)，也叫快速原型、极限编程或进化开发等

测试的原则:

- 完全测试程序是不可能的，有4个原因: 输入量太大、输出结果太多、软件执行路径太多、软件说明书是主观的
- 软件测试是有风险的行为
- 测试无法显示潜伏的软件缺陷
- 找到的软件缺陷越多，就说明软件缺陷越多
- 杀虫剂怪事
- 并非所有软件缺陷都要修复
- 什么时候才叫缺陷难以说清
- 产品说明书从没有最终版本
- 软件测试员在产品小组中不受欢迎
- 软件测试是一项讲究条理的技术专业

软件测试的术语和定义:

- 精确（precision）和准确（accuracy），例子，靶盘上的飞镖
- 确认（verification）和验证（validation），保证软件符合产品说明书的过程和保证软件满足用户要求的过程
- 质量（quality）和可靠性
- 测试（testing）和质量保证（quality assurance，QA）
    - 软件测试员的目标是尽可能早地找出软件缺陷，并确保缺陷得以修复
    - 软件质量保证人员的主要职责是创建和执行改进软件开发过程并防止软件缺陷发生的标准和方法

## 第二部分 测试基础 

测试方法:

- 黑盒测试（black-box testing）和白盒测试（white-box testing）:
    - 黑盒测试又称功能性测试（functional testing）或行为测试（behavioral testing）
    - 白盒测试有时称为透明盒测试（clear-box testing）
- 静态测试（static testing）和动态测试（dynamic testing）
- 通过性测试（test-to-pass）和失效性测试（test-to-fail）   

检查产品说明书（静态黑盒测试）:

- 优秀的产品说明书应具备的8个重要属性: 完整，准确，精确，一致，贴切，合理，代码无关，可测试性
- 产品说明书术语检查清单:
    - 总是、每一种、所有、没有、从不。软件测试员要考虑违反这些情况的用例
    - 当然、因此、明显、显然、必然。这些话意图说服你接受假定情况
    - 某些、有事、常常、通常、惯常、经常、大多、几乎。这些话太过模糊，"有时"发生作用的功能无法测试
    - 等等、诸如此类、依此类推、例如。这样的词结束的功能清单无法测试，功能清单要绝对或者解释明确
    - 良好、迅速、廉价、高效、小、稳定。这些是无法量化的术语，他们无法测试
    - 处理，进行，拒绝，跳过，排除。这些用词可能会隐藏大量需要说明的功能
    - 如果...那么...（没有否则）。找出有"如果...那么..."而缺少配套的"否则"结构的陈述，想一想"如果"没有发生会怎样

带上眼罩测试软件（动态黑盒测试）:

- 等价类划分（equivalence partitioning），有时称为等价分类（equivalence classing）
- 数据测试（数据————数字、文字、软件输入和输出）: 
    - 边界条件（boundary condition）
    - 次边界条件（sub0boundary conditions）或者内部边界条件（internal boundary conditions）
    - 默认、空白、空值、零值和无
    - 非法、错误、不正确和垃圾数据
- 状态测试: 测试软件的逻辑流程、失败状态测试
- 其他黑盒测试技术: 像笨拙的用户那样，在已经找到的软件缺陷的地方再找找，像黑客一样考虑问题，凭借经验、直觉和预感
 
检查代码（静态白盒测试）: 通过正式审查和检验检查代码的细节

- 正式审查（formal review）的4个基本要素: 确定问题，遵守规则，准备，编写报告
    - 常用审查方式: 同事审查 -> 走查（Walkthrough） -> 校验（inspections）
- 编码标准和规范
- 通用代码审查清单:
    - 数据引用错误
    - 数据声明错误
    - 计算错误
    - 比较错误
    - 控制流程错误
    - 子程序参数错误
    - 输入/输出错误
    - 其他检查: 编码，可移植，兼容性，提示信息

动态白盒测试，又称为结构化测试（structural testing）: 在看到软件的工作方式时，根据获得的信息对软件进行测试

- 包括4个部分:
    - 直接测试底层函数、过程、子程序和库。在 Microsoft Windows 中这称为应用程序编程接口（API）
    - 以完整程序的方式从顶层测试软件，但是根据对软件运行的了解调整测试用例
    - 从软件获取读取变量和状态信息的访问权，以便确定测试与预期结果是否相符，同时，强制软件以正常测试难以实现的方式运行
    - 估算执行测试时"命中"的代码量和具体代码，然后调整测试，去掉多余的测试用例，补充遗漏的用例
- 动态白盒测试和调试: 前者的目标时寻找软件缺陷，后者的目标时修复缺陷
- 分段测试:
    - 单元测试（unit testing）和集成测试（module testing） -> 系统测试（system testing）
        - 自底向上（bottom-up）和自顶向下（top-down），桩（Stub）
- 数据覆盖: 数据量（Data flow），次边界，公式和等式，错误强制（error forcing）
- 代码覆盖（code coverage）测试，代码覆盖率分析器（code coverage analyzer）
    - 代码覆盖最直接的形式称为语句覆盖（statement coverage）或者代码行覆盖（line coverage）
    - 试图覆盖软件中的所有路径称为路径覆盖，路径覆盖最简单的形式称为分支覆盖测试
    - 条件覆盖（condition coverage）测试将分支语句的条件考虑在内

## 第三部分 运用测试技术

配置测试:

- 配置测试综述: 分离配置缺陷，计算工作量
- 执行任务: 
    - 确定所需的硬件类型
    - 确定有哪些厂商的硬件、型号和驱动程序可用
    - 确定可能的硬件特性、模式和选项
    - 将确定后的硬件配置缩减为可控制的范围
    - 明确与硬件配置有关的软件唯一特性
    - 设计在每一种配置中执行的测试用例
    - 在每种配置中执行测试
    - 反复测试直到小组对结果满足为止
- 获得硬件
- 明确硬件标准
- 对其他硬件进行配置测试

软件兼容性测试（software compatibility testing），指检查软件之间是否能够正确地交互和共享信息:

- 平台和应用程序版本: 
    - 向后（backward compatible）和向前兼容（forward compatible）
    - 测试多个版本的影响
- 标准和规范
- 数据共享兼容性

外国语言测试: 使文字和图片有意义，翻译问题，本地化问题，配置和兼容性问题，测试量有多大

易用性测试: 用户界面测试，优秀UI由什么构成（符合标准和规范、直观、一致、灵活、舒适、正确、实用），为有残疾障碍的人员测试

测试文档:

- 测试文档可能的组成: 安装和设置指导，用户手册，联机帮助，授权/注册登记表，指南，样例，错误提示信息等
- 文档测试检查清单: 通用部分（术语等），正确性，检查的内容（图标和屏幕抓图、样例和示例、拼写和语法）
- 文档测试的实质: 文档常常得不到足够的重视、预算和援助，编写文档的人可能对软件做什么不甚了解，印刷文档制作要花不少时间

软件安全性测试:

- 威胁模式分析（threat modeling）
- 软件安全可以简单地看作是软件产品或系统的另外一项功能
- 了解缓冲区溢出
- 使用安全的字符串函数
- 计算机取证

网站测试:

- 黑盒测试: 文本，超级链接，图片，表单，对象和其他各种简单的功能
- 灰盒测试
- 白盒测试: 动态内容，数据库驱动的网页，用编程方法创建的网页，服务器性能和加载，安全性
- 配置和兼容性测试
- 易用性测试
- 自动化测试

## 第四部分 测试的补充

自动测试和测试工具:

- 工具和自动化的主要属性是: 速度，效率，准确度和精确度，节省资源，仿真和模拟，键值不懈
- 测试工具: 查看器或者监视器，驱动程序，桩，压力和负载工具，干扰注入器和噪声发生器，分析工具
- 测试自动化（test automation）
- 随机测试: 猴子和大猩猩

缺陷轰炸和 beta 测试

## 第五部分 使用测试文档

计划测试工作:

- 测试计划的目标（或目的）: 
    - 规定测试活动的范围、方法、资源和进度
    - 明确正在测试的项目、要测试的特性、要执行的测试任务、每个任务的负责人，以及与计划相关的风险
- 测试计划只是创建详细计划过程的一个副产品，重要的是计划过程，而不是产生的结果文档
- 测试计划过程的最终目标是交流（而不是记录）软件测试小组的意图、期望，以及对将要执行的测试任务的理解
- 测试计划主题，测试计划书可能包含的内容:
    - 高级期望
    - 人、地点和事
    - 定义
    - 团队之间的责任
    - 哪些要测试、哪些不要测试
    - 测试的阶段
    - 测试策略
    - 资源要求
    - 测试员的任务分配
    - 测试进度
    - 测试用例
    - 软件缺陷报告
    - 度量和统计
    - 风险和问题

编写和跟踪测试用例:

- 测试用例计划的 4 个目标: 组织，重复性，跟踪和测试证实
- 测试设计说明的部分内容: 标识符，要测试的特性，方法，测试用例确认，通过/失败规则
- 测试用例说明: 标识符，测试项，输入说明，输出说明，环境要求，特殊过程要求，用例之间的依赖性
- 测试程序或者测试脚本: 标识符，目的，特殊需求，执行步骤（日志、设置、启动、程序、度量、关闭、重启、终止、重置、偶然事件）

报告发现的问题:

- 报告软件缺陷的基本原则: 
    - 尽快报告软件缺陷
    - 有效描述软件缺陷(短小、单一，明显并通用，可再现)
    - 在报告软件缺陷时不要做评价
    - 对软件缺陷报告跟踪到底
- 缺陷分类: 
    - 严重性表示软件缺陷的恶劣程度，当用户碰到该缺陷时影响的可能性和程度
    - 优先级表示修复缺陷的重要程度和紧迫程度
- 测试事件报告: 标识符，总结，事件描述，影响

## 第六部分 软件测试的未来

软件质量保证，软件质量控制（SQC），能力成熟度模型（CMM），ISO 9000

## 问题解答

1.仅仅测试程序是否按预期方式运行有何问题？
答: 这最多只能算测试问题的一半。用户不一定遵守规则，软件测试员需要证实不按操作有何后果。此外，如果测试员进行测试没有打破砂锅问到底
的态度就会遗漏某些软件缺陷。

2.给出几个理由说明产品说明书为什么通常是软件产品中制造缺陷的最大来源。
答: 产品说明书常常没写————不要忘了，说不出来就做不出来。其他原因是产品说明书虽然有，但是不完整，不停更改，或者产品说明书内容没有
同开发小组其他成员沟通过。

3.说出在程序员开始编写代码之前要完成哪些任务？
答: 开发小组需要了解客户的要求，在产品说明书中定义功能特性。应该建立详细的进度，使小组成员知道哪些工作已经完成，哪些工作还要做。
软件应该形成体系，经过设计，测试小左应该开始计划工作。

4.正式并被锁定不能修改的产品说明书有何缺点？
答: 如果软件开发过程中市场转移到不同的方向上或者客户要求改变，就没有调整软件的灵活性。

5.加定无法完全测试某一程序，在决定是否应该停止测试时要考虑哪些问题？
答: 终止测试没有一定的时间，每一个项目都会有所不同。决定时要考虑的因素有: 依然会发现大量软件缺陷？项目小组对已执行的测试满意吗？
报告的软件缺陷是否经过评估定下来哪些修复，哪些不修复？产品按照客户的要求验证了吗？

6.为什么不可能完全测试程序？
答: 除了极短小的简单程序，完全测试需要太多输入、输出和分支组合。此外，软件说明书也许不客观，可能用多种方式解释。

7.假如周一测试软件的某一功能，美小时发现一个新的软件缺陷，你人为周二将会以什么样的频率发现软件缺陷？
答: 这里有两个基本要素。首先————余下的软件缺陷与发现的软件缺陷成正比————意味着周二不会比周一的情况好多少。其次，杀虫剂现象表明，
除非增加洗呢测试，否则反复执行同样的测试，不会发现不同的新软件缺陷。综合这两个软件要素，可能发现软件缺陷的速度继续保持原有的频率，
甚至更低。

8.判断是非: 访问程序的所有状态也确保了遍历各种状态之间的转换。
答: 错。想游览遍布美国的50个不同城市。可以指定到达每个城是的旅游计划，但不可能走遍所有城是之间的道路————这将是走遍美国的所有道路。

9.绘制状态转换图有多种不同的方法，但是它们都具有相同的三个要素是什么？
答: 软件可能处于的每一个状态；每一个状态转移到另一个状态所需的输入和条件；当进入和退出状态时产生的条件、变量和输出

10.如果要求程序员在命名变量时只能使用8个字符并且首字母必须采用大写的形式，那么这是标准还是规范呢?
答: 这应该算是标准，如果程序员被告知要用8个字符命名，那么就是规范了

11.三种代码覆盖种，哪一种最好？为什么？
答: 条件覆盖时最好的。因为它综合了分支覆盖和语句覆盖，它保证决策逻辑中过的u搜友条件（例如if-then语句等），以及来自这些语句的
所有分支和代码行都得到验证。

12.如何辨别发现的软件缺陷时普通问题还是特定的配置问题?
答: 在几个不同过的配置中重新运行暴露软件缺陷的相同步骤。如果软件缺陷不出现了，就可能时配置缺陷了。如果在不同的配置中都出现，就可能
是通用的问题。但是一定要注意。配置问题可以跨越整个等价划分。例如，软件缺陷仅在激光打印机上出现，而在喷墨打印机上表现不出来。

13.好的文档以哪3中方式确保产品的整体质量？
答: 增加易用性、提高可靠性、降低支持费用

14.列出在进行网站兼容性测试和配置测试时需要考虑到的一些方面。
答: 硬件平台、操作系统、Web浏览器、浏览器插件、浏览器选项和设置、视频分辨率和颜色深度、文字大小和调制解调器速度

15.测试计划说明的目的是什么？
答: 测试设计说明的目的是组织和描述针对某种功能特性要实施的测试。它列举了要测试的功能特性和要用的方法。它明确了测试用例，但是
不指明具体是什么，也不说明通过/失败的原则是什么。

16.什么是测试用例说明？
答: 该文档定义测试的实际输入值和预期输入结果，还指明具体的环境要求、程序要求和测试用例之间的依赖性




